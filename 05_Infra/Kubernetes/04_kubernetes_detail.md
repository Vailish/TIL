# 쿠버네티스
## 개념
- 컨테이너 오케스트레이션 시스템으로, 분산된 애플리케이션을 관리하기 위한 오픈소스 플랫폼입니다. 쿠버네티스는 컨테이너화된 애플리케이션의 배포, 확장 및 관리를 자동화하여 개발자와 운영팀이 애플리케이션을 더 쉽게 관리할 수 있도록 지원합니다.

## 구조
### 1. 마스터 노드 (Master Node):
- 쿠버네티스 클러스터의 제어 플레인을 관리하는 중심 노드입니다.
- 마스터 노드에는 다음과 같은 구성 요소가 포함됩니다:
    - Kube-API Server: 클러스터 관리 작업을 수신하고 처리하는 API 서버입니다.
    - etcd: 클러스터의 모든 상태 정보를 저장하는 분산형 키-값 저장소입니다.
    - Kube-Scheduler: 새로운 Pod를 어느 노드에 배치할지 결정하는 컴포넌트입니다.
    - Kube-Controller-Manager: 클러스터의 상태를 감시하고 조정하는 여러 컨트롤러를 실행하는 컴포넌트입니다.

### 2. 노드 (Node):
- 애플리케이션의 실행을 담당하는 워커 노드입니다.
- 각 노드에는 다음과 같은 구성 요소가 포함됩니다:
    - Kubelet: 마스터 노드로부터 받은 명령을 수행하고 Pod를 관리하는 에이전트입니다.
    - Container Runtime: 컨테이너를 실행하는 데 사용되는 소프트웨어입니다. 대표적으로 Docker, containerd, cri-o 등이 있습니다.
    - Kube-Proxy: 서비스의 로드 밸런싱, 네트워크 프록시 및 네트워크 정책 구현을 담당하는 네트워크 프록시입니다.

### 3. Pod:
    - 쿠버네티스에서 실행되는 최소 단위의 배포 단위입니다.
    - 각 Pod는 하나 이상의 컨테이너를 포함하며, 공유 네트워크 및 볼륨을 사용하여 컨테이너 간 통신과 데이터 공유를 지원합니다.
    - 동일한 Pod 내의 컨테이너는 동일한 네트워크 네임스페이스와 IPC 네임스페이스를 공유하며, localhost를 통해 통신할 수 있습니다.

### Service:
    - 클러스터 내의 여러 Pod에 대한 로드 밸런싱 및 서비스 디스커버리를 제공하는 추상화된 리소스입니다.
    - Service는 일반적으로 여러 Pod의 뒤에 숨겨져 있는 서비스를 하나의 가상 IP 주소로 노출시킵니다.

### Ingress:
    - 클러스터 외부에서 내부 서비스로의 HTTP 및 HTTPS 라우팅을 관리하는 객체입니다.
    - Ingress를 사용하여 클러스터 외부에서 서비스에 접근할 수 있으며, HTTP 요청을 올바른 서비스로 라우팅할 수 있습니다.

쿠버네티스는 이러한 구성 요소를 통해 컨테이너화된 애플리케이션을 효율적으로 관리하고, 확장하고, 장애를 처리하여 클라우드 네이티브 환경에서 안정적이고 확장 가능한 애플리케이션을 구축할 수 있습니다.

## 쿠버네티스 YAML 파일
- 쿠버네티스 클러스터 내에서 사용할 리소스를 정의하고 구성하는 데 사용됩니다.
- 예시
```yaml
kind: Pod
apiVersion: v1
metadata:
  name: mypod
spec:
  containers:
  - name: mycontainer
    image: nginx
    ports:
    - containerPort: 80
```
- 이 예시에서는 하나의 Pod를 정의하고 있습니다. Pod의 이름은 "mypod"이며, Pod 안에는 "nginx" 이미지를 실행하는 하나의 컨테이너가 포함되어 있습니다. 이 컨테이너는 포트 80을 열고 있습니다.